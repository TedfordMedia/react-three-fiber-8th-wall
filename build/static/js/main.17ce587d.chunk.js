(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{26:function(e,t,n){e.exports=n(35)},35:function(e,t,n){"use strict";n.r(t);var a=n(20),r=n.n(a),o=n(22),i=n(12),c=n.n(i),u=n(0),l=n.n(u),s=(n(34),n(10)),d=n(18),p=n(1),m=n(5),f=n(3),h=n(2),v=n(4),b=function(e){function t(e){var n;Object(p.a)(this,t),n=Object(f.a)(this,Object(h.a)(t).call(this,e));var a=e.rootElementType;return n.el=document.createElement(a),n}return Object(v.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.props.rootElement.append(this.el)}},{key:"componentWillUnmount",value:function(){this.props.rootElement.removeChild(this.el)}},{key:"render",value:function(){var e=this.props.children;return c.a.createPortal(e,this.el)}}]),t}(l.a.Component);b.defaultProps={rootElement:document.querySelector("body"),rootElementType:"div"};var g=b,x=n(7),w=n(8),j=function(e){var t=Object(u.useState)(!1),n=Object(x.a)(t,2),a=n[0],r=n[1],o=Object(u.useState)(null),i=Object(x.a)(o,2),c=i[0],l=i[1];return Object(u.useEffect)(function(){if(e){var t=document.createElement("script");t.type="text/javascript",t.src=e,t.async=!0,t.addEventListener("load",function(){r(!0)}),document.body.append(t),l(t)}},[e]),Object(u.useEffect)(function(){return function(){c&&document.body.removeChild(c)}},[c]),a},E=function(e){var t=Object(u.useState)(!1),n=Object(x.a)(t,2),a=n[0],r=n[1],o=j("//apps.8thwall.com/xrweb?appKey=".concat(e)),i=j("//cdn.8thwall.com/web/xrextras/xrextras.js");return Object(u.useEffect)(function(){o&&i&&r(!0)},[o,i]),a},O=function(e,t){var n=E(e),a=Object(u.useState)(null),r=Object(x.a)(a,2),o=r[0],i=r[1];return Object(u.useEffect)(function(){if(!o&&n&&t){var e=window.XRExtras;e.Loading.showLoading({onxrloaded:function(){var n=window.XR8;window.THREE=w,n.xrController().configure({disableWorldTracking:!1}),n.addCameraPipelineModules([n.GlTextureRenderer.pipelineModule(),n.XrController.pipelineModule(),e.AlmostThere.pipelineModule(),e.Loading.pipelineModule(),e.RuntimeError.pipelineModule()]),n.run({canvas:t}),i(n)}})}},[o,n,t]),o};var C=n(24),y=n(19),M=Object(u.createContext)(null);function S(e){var t=e.children,n=Object(d.a)(e,["children"]),a=l.a.useState({}),r=Object(x.a)(a,2),o=r[0],i=r[1],c=Object(u.useCallback)(function(e){i(function(t){return Object(y.a)({},t,e)})},[i]);return l.a.createElement(M.Provider,{value:Object(y.a)({},o,n,{updateCtx:c})},l.a.cloneElement(t,Object(y.a)({},o,n,{updateCtx:c})))}var R,P=function(e){var t=e.name,n=e.updateCtx,a=Object(s.c)(),r=a.scene,o=a.gl,i=a.camera,c=Object(u.useState)(null),d=Object(x.a)(c,2),p=d[0],m=d[1],f=Object(u.useRef)(),h=Object(u.useRef)();o.domElement.id=t,Object(s.b)(function(e){var t=e.gl,n=e.scene,a=e.camera;t.clearDepth(),t.render(n,a)},1);var v=window,b=v.XR8;v.THREE;Object(u.useEffect)(function(){b.addCameraPipelineModule({name:"xrthree",onStart:w,onUpdate:j,onCanvasSizeChange:g,xrScene:E})});var g=function(e){var t=e.canvasWidth,n=e.canvasHeight;o.setSize(t,n),i.aspect=t/n,i.updateProjectionMatrix()},w=function(e){var t=e.canvasWidth,a=e.canvasHeight;o.autoClear=!1,o.setSize(t,a),o.antialias=!0,n({scene:r,camera:i,renderer:o}),b.XrController.updateCameraProjectionMatrix({origin:i.position,facing:i.quaternion})},j=function(e){var t=e.processCpuResult;i.updateProjectionMatrix();var n=t.reality;if(n&&n.intrinsics){for(var a=n.intrinsics,r=n.position,o=n.rotation,c=i.projectionMatrix.elements,u=0;u<16;u++)c[u]=a[u];i.projectionMatrixInverse.getInverse(i.projectionMatrix),i.setRotationFromQuaternion(o),i.position.copy(r)}},E=function(){return{scene:r,camera:i,renderer:o}};return l.a.createElement("group",null,l.a.createElement("mesh",{onPointerDown:function(e){return m(e.intersections[0].point)},receiveShadow:!0,position:[0,0,0],ref:f,"rotation-x":-Math.PI/2},l.a.createElement("planeGeometry",{attach:"geometry",args:[100,100,1,1]}),l.a.createElement("shadowMaterial",{opacity:.3})),l.a.createElement("group",{position:[0,.5,0]},l.a.createElement("mesh",{castShadow:!0,position:p,visible:!!p,ref:h,userData:{hello:"yop"}},l.a.createElement("boxGeometry",{args:[1,1,1]}),l.a.createElement("meshStandardMaterial",{color:"blue"}))))},k=function(){var e,t=Object(s.c)().gl,n=window,a=n.XR8,r=(n.THREE,{}),o=0,i=t.domElement,c={position:"static",width:"100%",height:"100%",margin:"0px",padding:"0px",border:"0px",display:"block",top:"0px",left:"0px"},d={position:"fixed",width:"100%",height:"100%",margin:"0px",padding:"0px",border:"0px",display:"block",top:"0px",left:"0px"},p={width:"100%",height:"100%",margin:"0px",padding:"0px",border:"0px"},m=function t(){if(e){var n=window.innerWidth,a=window.innerHeight,u=n*devicePixelRatio,l=a*devicePixelRatio;if((0===o||180===o)&&u>l||(90===o||-90===o)&&l>u)window.requestAnimationFrame(t);else{var s=Math.max(u,l),p=Math.min(u,l),m=s/p,f=Math.max(r.w,r.h),h=Math.min(r.w,r.h),v=f,b=Math.round(f/m);if(b>h&&(b=h,v=Math.round(h*m)),(b>p||v>s)&&(b=p,v=s),u>l){var g=b;b=v,v=g}Object.assign(e.style,c),e.width=b,e.height=v,Object.assign(i.style,d),i.width=b,i.height=v,setTimeout(function(){return window.scrollTo(0,(window.scrollY+1)%2)},300)}}},f=function(e){var t=e.videoWidth,n=e.videoHeight;r.w=t,r.h=n};Object(u.useEffect)(function(){a.addCameraPipelineModule({name:"fullwindow-canvas",onUpdate:h,onStart:v,onDeviceOrientationChange:x,onCanvasSizeChange:g,onVideoSizeChange:b,onCameraStatusChange:w})});var h=function(){e.style.width===c.width&&e.style.height===c.height||m()},v=function(t){var n=t.canvas,a=t.orientation;o=a,(e=n).style=c,i.style=d;var r=document.getElementsByTagName("body")[0];Object.assign(r.style,p),r.appendChild(e),m()},b=function(e){var t=e.videoWidth,n=e.videoHeight;f({videoWidth:t,videoHeight:n}),m()},g=function(){m()},x=function(e){var t=e.orientation;o=t,m()},w=function(e){var t=e.status,n=e.video;"hasVideo"===t&&f(n)};return l.a.createElement(l.a.Fragment,null)},T=(R=function(e){function t(t){var n=t.appKey,a=t.xr8Config,r=(t.updateCtx,Object(d.a)(t,["appKey","xr8Config","updateCtx"])),o=Object(u.useRef)(null),i=O(n,o.current);return l.a.createElement(l.a.Fragment,null,l.a.createElement(g,{rootElement:document.body},l.a.createElement("canvas",{ref:o})),i&&l.a.createElement(e,Object.assign({XR8:i,xr8Config:a},r)))}return t.defaultProps={updateCtx:void 0},function(e){return l.a.createElement(t,e)}}(function(e){var t=e.XR8,n=(e.xr8Config,e.onComplete,e.backgroundImage,function(){var e=Object(u.useContext)(M);if(!e)throw new Error("No proper appStateContext provided");return e}().updateCtx);return Object(u.useEffect)(function(){t&&n({XR8:t})},[t,n]),l.a.createElement(s.a,{concurrent:!0,style:{width:"100%",height:"100%",position:"absolute",left:"0px",top:"0px",zIndex:100},shadowMap:!0,updateDefaultCamera:!1,camera:{position:[0,0,5],fov:60}},l.a.createElement("ambientLight",{intensity:.5}),l.a.createElement("spotLight",{intensity:.6,position:[20,10,10],angle:.2,penumbra:1,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,castShadow:!0}),l.a.createElement(P,{name:"xr-three",updateCtx:n}),l.a.createElement(k,null))}),function(e){var t=Object(C.a)({},e);return l.a.createElement(S,t,l.a.createElement(R,null))}),H=function(e,t){console.log("onComplete has been triggered"),console.log("action =",e),console.log("result =",t),alert("Check your logs!")},X=function(e){return e?l.a.createElement(T,e):null};(function(){var e=Object(o.a)(r.a.mark(function e(){var t,n;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("config.json");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c.a.render(l.a.createElement(X,Object.assign({onComplete:H},n)),document.querySelector("#root"));case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()()}},[[26,2,1]]]);
//# sourceMappingURL=main.17ce587d.chunk.js.map